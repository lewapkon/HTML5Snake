{"ts":1370790556196,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"snake.screens[\"game-screen\"] = (function() {\n\tvar settings = snake.settings,\n\t\tboard = snake.board,\n\t\tdisplay = snake.display,\n\t\tinput = snake.input,\n\t\tfirstRun = true,\n\t\ttimer,\n\t\tdom = snake.dom,\n\t\t$ = dom.$;\n\tfunction run() {\n\t\tif (firstRun) {\n\t\t\tsetup();\n\t\t\tfirstRun = false;\n\t\t}\n\t\tboard.initialize(function() {\n\t\t\tdisplay.initialize(function() {\n\t\t\t\tdisplay.redraw(board.getBoard(), function() {\n\t\t\t\t\t// Na razie nic nie robi.\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\tfunction announce(str) {\n\t\tvar element = $(\"#game-screen .announcement\")[0];\n\t\telement.innerHTML = str;\n\t\tif (Modernizr.cssanimations) {\n\t\t\tdom.removeClass(element, \"zoomfade\");\n\t\t\tsetTimeout(function() {\n\t\t\t\tdom.addClass(element, \"zoomfade\");\n\t\t\t}, 1);\n\t\t} else {\n\t\t\tdom.addClass(element, \"active\");\n\t\t\tsetTimeout(function() {\n\t\t\t\tdom.removeClass(element, \"active\");\n\t\t\t}, 1000);\n\t\t}\n\t}\n\tfunction gameOver() {\n\t\tdisplay.gameOver(function() {\n\t\t\tannounce(\"Przegrałeś grę!\");\n\t\t\twindow.clearInterval(timer);\n\t\t});\n\t}\n\tfunction turn(turn) {\n\t\tif (turn == 0) {\n\t\t\tboard.turnLeft();\n\t\t}\n\t\tif (turn == 1) {\n\t\t\tboard.turnRight();\n\t\t}\n\t}\n\tfunction setup() {\n\t\tinput.initialize();\n\t\tinput.bind(\"turnLeft\", board.turnLeft);\n\t\tinput.bind(\"turnRight\", board.turnRight);\n\t\t//input.bind(\"go\", board.go);\n\t\tinput.bind(\"turn\", turn);\n\t\ttimer = setInterval(board.go, 200);\n\t}\n\treturn {\n\t\trun : run,\n\t\tgameOver : gameOver,\n\t\tannounce : announce\n\t};\n})();\n"]],"start1":0,"start2":0,"length1":0,"length2":1394}]],"length":1394}
